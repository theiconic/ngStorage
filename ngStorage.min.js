/*! ngstorage 0.3.7 | Copyright (c) 2018 Gias Kay Lee | MIT License */!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof exports?module.exports=b(require("angular")):b(a.angular)}(this,function(a){"use strict";function b(b){return["$rootScope","$window","$log","$timeout",function(d,k,l,m){function n(a){var b;try{b=k[a]}catch(c){b=!1}if(b){var d="__"+Math.round(1e7*Math.random());try{b.setItem(d,d),b.removeItem(d)}catch(c){b=!1}}return b}var o,p,q=n(b)||(l.warn("This browser does not support Web Storage!"),{setItem:e,getItem:e,removeItem:e,key:e}),r={$default:function(a){for(var b in a)j(r[b])||(r[b]=a[b]);return r.$sync(),r},$reset:function(a){for(var b in r)"$"===b[0]||delete r[b]&&q.removeItem(c+b);return r.$default(a)},$sync:function(){for(var a,b,d=q.length;d--;)b=q.key(d),a=f(b),b&&c+a===b&&(r[a]=g(q.getItem(b)))},$apply:function(){var b;if(p=null,!a.equals(r,o)){b=i(o),a.forEach(r,function(a,d){j(a)&&"$"!==d[0]&&q.setItem(c+d,h(a)),delete b[d]});for(var d in b)q.removeItem(c+d);o=i(r)}}};return r.$sync(),o=i(r),d.$watch(function(){p||(p=m(r.$apply,100,!1))}),k.addEventListener("storage",function(a){var b,e=a.key,h=a.newValue;e&&(b=f(e),e===c+b&&(h?r[b]=g(h):delete r[b],o=i(r),d.$$phase||d.$apply()))}),k.addEventListener("beforeunload",function(a){r.$apply()},!1),r}]}var c="ngStorage-",d=c.length,e=function(){},f=function(a){return a.slice(d)},g=a.fromJson,h=a.toJson,i=a.copy,j=a.isDefined;return a.module("ngStorage",[]).factory("$localStorage",b("localStorage")).factory("$sessionStorage",b("sessionStorage"))});